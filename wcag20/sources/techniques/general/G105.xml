<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE technique
  SYSTEM "../../xmlspec.dtd">
<technique id="G105">
   <short-name>利用者が再認証した後に利用できるようにデータを保存する</short-name>
   <applicability>
      <p>データを送信するのに、利用者認証を求め制限時間のあるウェブページ</p>
   </applicability>
   <applies-to>
      <success-criterion idref="time-limits-server-timeout" relationship="sufficient"/>
   </applies-to>
   <description>
    <p>利用者に認証を求めるウェブサーバーは、一定時間、利用者の操作がない場合、セッションを終了することがよくある。利用者が素早くデータを入力できず、送信前にセッションが時間切れになってしまった場合、プロセスの続行前にサーバーから再認証が求められるだろう。この場合、サーバーはキャッシュの中にデータを一時的に保存しておき、その後、利用者がログインし、再認証したら、データがキャッシュから利用可能になり、まるでセッションの時間切れがなかったかのようにフォームを処理する。サーバーはキャッシュを無期限には保持できず、利用者の単一セッション中の再認証後まで保持できる長さは、例えば 1 日ぐらいでしかない。</p>
  </description>
   <examples>
      <ulist>
         <item>
            <p>あるフォーラムに利用者がログインし、回答を送信しようとしている。回答が書き終わる時間は、サーバーから許可されている不操作セッション時間よりも長いとする。利用者は回答を送信したが、セッションの時間切れが通知され、回答の再送信のためにログインするよう促された。利用者の回答はサーバーに保存されており、ログインが成功すれば通常通り回答が処理される。ログインが成功しなければ、回答は破棄される。</p>
         </item>
         <item>
            <p>セキュリティが保護されたエリアに利用者がログインし、フォームに入力している。セキュリティ上の理由のため、セッションが時間切れになった。フォームデータはサーバーに保存され、利用者には時間切れが通知され、再ログインが促される。利用者が正しくログインできれば、全てのデータが以前に入力された状態でフォームが表示される。ログインが成功しなければ、フォームデータは破棄される。</p>
         </item>
      </ulist>
   </examples>
   <related-techniques>
      <relatedtech idref="G181"/>
   </related-techniques>
   <tests>
      <procedure>
      <p>データの送信にあたって利用者にログインを求めるサイトについて:</p>
      <olist>
        <item>
          <p>ログインし、制限時間のある操作を始める。</p>
        </item>
        <item>
          <p>セッションを時間切れにさせる。</p>
        </item>
        <item>
          <p>データを送信する。</p>
        </item>
        <item>
          <p>再認証する。</p>
        </item>
        <item>
          <p>元のデータ及び再認証後の変更内容を含めた、データの損失なしに、プロセスが継続可能して完了できることを確認する。</p>
        </item>
      </olist>
    </procedure>
      <expected-results>
         <ulist>
            <item>
               <p>5. の結果が真である。</p>
            </item>
         </ulist>
      </expected-results>
   </tests>
</technique>
