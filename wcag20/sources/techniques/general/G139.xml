<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE technique
  SYSTEM "../../xmlspec.dtd">
<technique id="G139">
   <short-name>利用者がエラー箇所に移動できるメカニズムを作成する</short-name>
   <applicability>
      <p>利用者のデータ入力を受け付け、そのフォーマット、値及び／又は入力の種類に制限があるコンテンツ</p>
   </applicability>
   <applies-to>
      <success-criterion idref="minimize-error-identified" relationship="sufficient"/>
      <success-criterion idref="minimize-error-suggestions" relationship="sufficient"/>
   </applies-to>
   <description>
      <p>この達成方法の目的は、利用者によって提供された情報が受け付けられない場合に、入力エラーの修正を支援することである。これには、必須入力欄が空欄の場合と、入力欄に正しくない情報が入力された場合とが含まれる。利用者による入力データをバリデートした結果、入力エラーが検出された場合に、この入力エラーの内容と場所に関する情報をテキストで提供することによって、利用者は問題のある箇所を特定することができる。一つのアプローチとして、サーバーサイドでのバリデーションを用いて、フォームを再表示し (すでに入力されたデータも含む)、ページの上部にテキストでの説明文を表示して、エラーがあったことを知らせるとともに問題の内容を説明して、利用者が問題のあった項目を簡単に見つけられるような方法を提供することがある。</p>
   </description>
   <examples>
      <eg-group>
         <head>サーバーサイドのエラーチェック</head>
         <description>
            <p>利用者がフォーム項目に無効なデータを入力して、そのフォームを送信すると、サーバーがフォームを利用者に再提示する。利用者の入力したデータはそのまま表示された状態で、ページの上部に入力エラーがあったことをテキストで明確に示している。このテキストは、エラーの内容を説明していて、どの項目に問題があったのかを明確に示しているため、利用者はその項目へ容易に移動し、問題を修正することができる。</p>
         </description>
      </eg-group>
      <eg-group>
         <head>ポップアップを用いたクライアントサイドのエラーチェック</head>
         <description>
            <p>利用者がフォーム項目に無効なデータを入力して、そのフォームを送信しようとする。クライアントサイドのスクリプトがエラーを検出し、送信をキャンセルした上で、そのフォームにエラーを説明するテキストとエラーのある項目へのリンクを表示する。また、このスクリプトは、問題のある項目のラベルを変更して、それを強調する。</p>
         </description>
      </eg-group>
      <eg-group>
         <head>ポップアップを用いないクライアントサイドのエラーチェック</head>
         <description>
            <p>利用者がフォームを送信しようとした時、新たなページに遷移させる代わりに、スクリプトが自動的に「エラーが発生しました」というテキストにフォーカスする。エラーを説明するメッセージリストにリンクし、一つ一つの項目がエラー箇所にリンクをする。また、エラー箇所からエラーメッセージリストへのリンクも設置されている。このプロセスが必要な限り繰り返される。</p>
         </description>
      </eg-group>
   </examples>
   <related-techniques>
      <relatedtech idref="G83"/>
      <relatedtech idref="G85"/>
      <relatedtech idref="SCR18"/>
   </related-techniques>
   <tests>
      <procedure>
         <olist>
            <item>
               <p>フォームに記入し、故意に必須項目を空白にして、他のフィールドに入力エラーを作った状態でフォームを送信する。</p>
            </item>
            <item>
               <p>必要なデータが欠落しているフィールドを特定するテキストメッセージが提供されていることを確認する。</p>
            </item>
            <item>
               <p>入力エラーのあるフィールドを特定するテキストメッセージが提供されていることを確認する。</p>
            </item>
            <item>
               <p>欠落しているデータのメッセージから、必要なデータが欠落している各フィールドへのリンクがあることを確認する。</p>
            </item>
            <item>
               <p>エラーメッセージからエラーリストへのリンクがあることを確認する。</p>
            </item>
         </olist>
         <note>
            <p>達成基準 3.3.2 では、入力エラーが検知され、修正の示唆が既知であり、セキュリティ又はコンテンツの目的が脅かされることなく提供できる場合、利用者に修正の示唆を提供するよう求めている。</p>
         </note>
      </procedure>
      <expected-results>
         <ulist>
            <item>
               <p>2. の結果が真である場合、4. の結果が真である。</p>
            </item>
            <item>
               <p>3. の結果が真である場合、5. の結果が真である。</p>
            </item>
         </ulist>
      </expected-results>
   </tests>
</technique>
